# Kubernetes (k8s) architecture

In order to run, k8s needs:
1. A subnet
2. A VPN on that subnet that can be joined by both GCE and non-GCE machines
3. 3 distinct `etcd` instances running on different machines, all mutually backing each other up
4. An instance of `kube-apiserver`
5. An instance of `kube-controller-manager`
6. An instance of `kube-scheduler`
7. An instance of `kube-dns` (optional but very handy)
8. A certificate authority for generating certs

Each machine that wants to be controlled by k8s (each Node) needs:
1. Appropriate certs, generated by the CA on the root server
2. a VPN client connected to the VPN
3. To run `kubelet` to connect to the controller
4. To run `kube-proxy` (maybe, hopefully not required)
5. To install `cri-containerd` to respond appropriately to commands to run a
   container
6. To install CNI and any relevant plugins to allocate IPs to containers
   appropriately


# Allocate, set up, and start the MLab k8s servers

See the [cloud/](cloud/) directory.

# Set up the MLab platform nodes

See the [node/](node/) directory.
